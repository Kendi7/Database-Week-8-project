CREATE DATABASE IF NOT EXISTS Procurement;
USE Procurement;
CREATE TABLE EMPLOYEES (
  EMPLOYEEID INT PRIMARY KEY,
  NAME VARCHAR(255),
  ROLE VARCHAR(255),
  EMAIL VARCHAR(255)
);

CREATE TABLE SUPPLIERS (
  SUPPLIERID INT PRIMARY KEY,
  SUPPLIERNAME VARCHAR(255),
  CONTACTINFORMATION INT
);

CREATE TABLE PRODUCTS (
  PRODUCTID INT PRIMARY KEY,
  PRODUCTNAME VARCHAR(255),
  UNIT VARCHAR(255),
  PRICEPERUNIT DECIMAL(10,2),
  SUPPLIERID INT,
  FOREIGN KEY (SUPPLIERID) REFERENCES SUPPLIERS(SUPPLIERID)
);

CREATE TABLE PURCHASE_ORDERS (
  POID INT PRIMARY KEY,
  EMPLOYEEID INT,
  SUPPLIERID INT,
  PODATE DATE,
  STATUS VARCHAR(255),
  FOREIGN KEY (EMPLOYEEID) REFERENCES EMPLOYEES(EMPLOYEEID),
  FOREIGN KEY (SUPPLIERID) REFERENCES SUPPLIERS(SUPPLIERID)
);

CREATE TABLE APPROVALS (
  APPROVALID INT PRIMARY KEY,
  POID INT,
  APPROVEDBY INT,
  APPROVALDATE DATE,
  DECISION VARCHAR(255),
  COMMENTS TEXT,
  FOREIGN KEY (POID) REFERENCES PURCHASE_ORDERS(POID),
  FOREIGN KEY (APPROVEDBY) REFERENCES EMPLOYEES(EMPLOYEEID)
);

CREATE TABLE INVOICES (
  INVOICEID INT PRIMARY KEY,
  POID INT,
  INVOICEDATE DATE,
  AMOUNTDUE DECIMAL(10,2),
  STATUS VARCHAR(255),
  FOREIGN KEY (POID) REFERENCES PURCHASE_ORDERS(POID)
);



-- Insert  employees
INSERT INTO EMPLOYEES (EMPLOYEEID, NAME, ROLE, EMAIL) 
VALUES
(1, 'Kennedy Otieno', 'Procurement Officer', 'kotieno@agrifirm.co.ke'),
(2, 'Faith Wanjiku', 'Approver', 'fwanjiku@agrifirm.co.ke'),
(3, 'David Mwangi', 'Requester', 'dmwangi@agrifirm.co.ke'),
(4, 'Aisha Abdalla', 'Finance Officer', 'aabdalla@agrifirm.co.ke');

-- Insert suppliers
INSERT INTO SUPPLIERS (SUPPLIERID, SUPPLIERNAME, CONTACTINFORMATION) 
VALUES
(1, 'Mavuno Fertilizers Ltd', 702134567),
(2, 'Twiga Chemicals', 711567890),
(3, 'KenAgro Inputs', 721345678),
(4, 'Baraka Seeds Ltd', 733765432);

-- Insert products
INSERT INTO PRODUCTS (PRODUCTID, PRODUCTNAME, UNIT, PRICEPERUNIT, SUPPLIERID)
VALUES
(1, 'DAP Fertilizer 50kg', 'Bag', 3200.00, 1),
(2, 'Pesticide (Actara)', 'Bottle', 950.00, 2),
(3, 'Maize Seeds Hybrid H614', 'Packet', 280.00, 4),
(4, 'Animal Feed Pellets 70kg', 'Bag', 2600.00, 3);

-- Insert purchase orders
INSERT INTO PURCHASE_ORDERS (POID, EMPLOYEEID, SUPPLIERID, PODATE, STATUS)
VALUES
(1, 1, 1, '2025-04-0po1', 'Pending'),
(2, 3, 2, '2025-04-03', 'Approved'),
(3, 1, 3, '2025-04-10', 'Rejected'),
(4, 3, 4, '2025-04-15', 'Pending');

-- Insert approvals
INSERT INTO APPROVALS (APPROVALID, POID, APPROVEDBY, APPROVALDATE, DECISION, COMMENTS) 
VALUES
(1, 1, 2, '2025-04-02', 'Approved', 'Urgent delivery required'),
(2, 2, 2, '2025-04-04', 'Approved', 'Stock verified'),
(3, 3, 2, '2025-04-11', 'Rejected', 'Duplicate request'),
(4, 4, 2, '2025-04-16', 'Pending', 'Awaiting clarification');

-- Insert invoices
INSERT INTO INVOICES (INVOICEID, POID, INVOICEDATE, AMOUNTDUE, STATUS) 
VALUES
(1, 1, '2025-04-05', 12800.00, 'Unpaid'),
(2, 2, '2025-04-07', 3800.00, 'Paid'),
(3, 3, '2025-04-12', 10400.00, 'Cancelled'),
(4, 4, '2025-04-18', 1120.00, 'Unpaid');
